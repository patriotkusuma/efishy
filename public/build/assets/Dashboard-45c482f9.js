import{j as o,a as e,r as t,W as me,g as y,b as de,d as x}from"./app-ae6dc9df.js";import{u as he,A as pe}from"./AuthenticatedLayout-dc541615.js";import{O as fe}from"./OverviewSuhu-0c791957.js";import{O as ge}from"./OverviewPh-4372f450.js";import{O as Pe,a as ke}from"./OverviewPakanTerakhir-48f760fa.js";import{h as ve}from"./moment-fbc5633a.js";import{T as be}from"./TableRiwayatPakan-e53fdf1a.js";import{S as Se}from"./SearchRiwayatPakan-f9c8fa09.js";import{p as m,C as ye}from"./Container-be20f32f.js";import{C as N,a as W,S as F}from"./Stack-84c66384.js";import{C as _}from"./CardContent-c756119f.js";import{F as H,I as L,S as xe,O as Ce,P as Me}from"./TextField-f735f57a.js";import{M as p,I as we}from"./DemoContainer-5c8171cb.js";import{B as Re}from"./Button-7259bb28.js";import{f as d,s as De}from"./styled-b627da4d.js";import{y as I}from"./index.esm-e5efdc73.js";import{G as f}from"./index.esm-04eca18b.js";import{S as Ye}from"./Snackbar-dd2d0bd4.js";import{A as Te}from"./Alert-ab498879.js";import"./transition-c030e732.js";import"./index.esm-497e4627.js";import"./DatePicker-a8dcfccd.js";import"./IconButton-78b9cee9.js";import"./useMediaQuery-5c17f929.js";import"./TableContainer-8af6b93b.js";import"./Hidden-a2631a2e.js";const q=r=>{const{jumlah:u,isMore:g,handleJumlahChange:c,submit:P,moreValue:C,handleMoreValue:k}=r;return o(N,{sx:{borderRadius:"10px"},children:[e(W,{title:"Pakan Manual"}),e(_,{md:6,children:o(F,{spacing:3,alignItems:"flex-start",children:[o(H,{sx:{minWidth:300},children:[e(L,{id:"demo-simple-select-label",htmlFor:"demo-simple-select-label",children:"Jumlah Pakan"}),o(xe,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u,label:"Jumlah Pakan",onChange:c,children:[e(p,{value:"",children:e("em",{children:"None"})}),e(p,{value:100,children:"100"}),e(p,{value:200,children:"200"}),e(p,{value:300,children:"300"}),e(p,{value:"lain",children:"Lainnya..."})]})]}),g==!0?o(H,{sx:{minWidth:300},variant:"outlined",children:[e(L,{htmlFor:"outlined-adornment-password",children:"Jumlah Lainnya"}),e(Ce,{value:C||"",onChange:k,name:"moreValue",id:"outlined-adornment-password",type:"number",endAdornment:e(we,{position:"end",children:"gram"}),label:"Input Lainnya"})]}):"",e(Re,{onClick:P,variant:"contained",color:"success",size:"large",children:"Makan Sekarang"})]})})]})};q.protoType={jumlah:m.PropTypes.number,isMore:m.PropTypes.bool,handleJumlahChange:m.PropTypes.func,moreValue:m.PropTypes.number,handleMoreValue:m.PropTypes.func,submit:m.PropTypes.func};const Ve=q;De(Me)(({theme:r})=>({backgroundColor:r.palette.mode==="dark"?"#1A2027":"#fff",...r.typography.body2,padding:r.spacing(1),textAlign:"center",color:r.palette.text.secondary}));const O=()=>({preserveState:!0,preserveScroll:!0,replace:!0,only:["riwayatPakan"]});function oa(r){const u=he(),{riwayatPakan:g,flash:c,pakanTerakhir:P}=r,[C,k]=t.useState(),[M,z]=t.useState(0),[B,w]=t.useState(d[500]),[R,G]=t.useState(0),[Q,D]=t.useState(d[500]),[v,$]=t.useState(0),[K,Y]=t.useState(d[500]),[U,X]=t.useState(),[Z,j]=t.useState(!1),[A,J]=t.useState(0),[l,ee]=t.useState(null),[s,ae]=t.useState(null),[n,te]=t.useState(null),[b,T]=t.useState(0),[S,re]=t.useState(5);me();const[E,V]=t.useState({value:!1,count:0});t.useEffect(()=>{u.connect("wss://mqtt.efishy.my.id:8083/",{keepalive:60}),u.subscribe(["realTime"],0,{},()=>{console.log("subrek")}),c.success!=null&&E.count==0&&V({value:!0})},[u,c.success]);const oe=()=>{T(0);let a=b+1;y.get(route("dashboard"),{page:a||0,searchReportPakan:l,dateFromReportPakan:s!=null?s.format("YYYY-MM-DD"):"",dateToReportPakan:n!=null?n.format("YYYY-MM-DD"):"",rowsPerPageReport:S||5},O())};t.useEffect(()=>{(l!=null||s!=null||n!=null)&&oe()},[l,s,n]),u.registerEvent("realTime",(a,h)=>{var i=JSON.parse(h);i==0?k(!1):(k(!0),z(i.valuesSuhu),G(i.valuePh),$(i.valueSisaPakan),M>32?w("red"):M<26?w(I[700]):w(d[500]),R>8?D("red"):R<6?D(d[500]):D(I[700]),v<20?Y("red"):v>20&&v<80?Y(I[700]):Y(d[500]))});const se=a=>{a.target.value=="lain"?j(!0):j(!1),J(a.target.value),X(a.target.value)},ne=a=>{J(a.target.value)},le=a=>{a.preventDefault(),y.post(route("pakan-manual"),{jumlah_keluar:A},{preserveScroll:!0,preserveState:!0}),V({count:0})},ie=t.useCallback(a=>{re(+a.target.value),T(0);let h=b+1;y.get(route("dashboard"),{page:h,searchReportPakan:l||"",dateFromReportPakan:s?s.format("YYYY-MM-DD"):"",dateToReportPakan:n?n.format("YYYY-MM-DD"):"",rowsPerPageReport:a.target.value},O())},[]),ue=(a,h)=>{T(h);let i=b+1;y.get(route("dashboard"),{page:i||0,searchReportPakan:l||"",dateFromReportPakan:s?s.format("YYYY-MM-DD"):"",dateToReportPakan:n?n.format("YYYY-MM-DD"):"",rowsPerPageReport:S},O())},ce=()=>{V({value:!1,count:1})};return o(pe,{user:r.auth.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e(de,{title:"Dashboard"}),e(ye,{className:"py-12",children:o(F,{direction:"column",spacing:4,children:[o(f,{container:!0,spacing:1,sx:{flexDirection:{xs:"column",md:"row"}},alignItems:"flex-start",justifyContent:"space-between",children:[e(f,{item:!0,xs:12,md:2.5,children:e(x,{href:route("kualitas-air.suhu.index"),children:e(fe,{suhuColors:B,sx:{height:"100%",borderRadius:"10px"},value:M.toLocaleString("id-ID",{maximumFractionDigits:2})})})}),e(f,{item:!0,xs:12,md:2.5,children:e(x,{href:route("kualitas-air.sensor-ph.index"),children:e(ge,{phColors:Q,sx:{height:"100%",borderRadius:"10px"},value:R})})}),e(f,{item:!0,xs:12,md:2.5,children:e(x,{href:route("pakan.sisa-pakan.index"),children:e(Pe,{customColor:K,sx:{height:"100%",borderRadius:"10px"},value:v})})}),e(f,{item:!0,xs:12,md:4,children:e(x,{href:route("pakan.atur-pakan.index"),children:e(ke,{customColor:"blue",sx:{height:"100%",borderRadius:"10px"},value:P.jumlah_keluar,time:ve(P.created_at).format("DD MMMM YYYY, HH:mm:ss")})})})]}),e(Ve,{jumlah:U,isMore:Z,handleJumlahChange:se,moreValue:A,handleMoreValue:ne,submit:le}),o(N,{children:[e(W,{title:"Riwayat Pemberian Pakan"}),e(_,{children:o(F,{spacing:2,children:[e(Se,{searchData:l,dateFrom:s,dateTo:n,onSearchData:({target:a})=>ee(a.value),onDateFrom:a=>ae(a),onDateTo:a=>te(a)}),e(be,{items:g.data,count:g.total,rowsPerPage:S,onRowsPerPageChange:ie,onPageChange:ue,page:b})]})})]})]})}),e(Ye,{anchorOrigin:{vertical:"top",horizontal:"right"},open:E.value,autoHideDuration:6e3,children:e(Te,{onClose:ce,severity:"success",sx:{width:"100%"},variant:"filled",children:c?c.success:""})})]})}export{oa as default};
